import{t as y,v as E,a as o,o as e,N as x,w as M}from"./chunk-NL6KNZEE-p7aHl_Kw.js";import{a as S}from"./TodosContext-Dg6UmxcR.js";function R(){const m=y(),f=Number(m.todoId),p=E(),{todos:i,getSessionTodos:D,setSessionTodos:N,deleteSessionTodos:T,updateTodos:j}=o.useContext(S),[r,g]=o.useState({}),[c,b]=o.useState(!0),[a,h]=o.useState(!1),d=o.useRef(null),l=o.useRef(null);f||p("/todos");const v=()=>{h(t=>!t)},C=(t,s)=>{if(confirm("Êtes-vous sûr de vouloir supprimer cette tâche ?")){const n=s.filter(u=>Number(u.id)!==Number(t.id));T(n)}p("/todos")},k=(t,s)=>{const n=s.map(u=>Number(u.id)===Number(t.id)?t:u);N(n),j(n),console.log("modify")},w=()=>{const t=(d.current&&d.current.innerText)??"",s=(l.current&&l.current.innerText)??"";if(console.log(t,s),t.length>0&&s.length>0){const n={...r,title:t,description:s};k(n,i)}h(!1)};return o.useEffect(()=>{(async()=>{if(c&&i){const t=await i.find(s=>Number(s.id)===f);g(t),t&&b(!1)}})()},[c,i,d,l]),r?e.jsxs("article",{className:"main-articles",children:[e.jsx("h2",{className:"main-articles-title",contentEditable:a,suppressContentEditableWarning:!0,ref:d,children:r.title}),e.jsx("p",{contentEditable:a,suppressContentEditableWarning:!0,ref:l,children:r.description}),e.jsxs("aside",{className:"cta-links-container",children:[e.jsx("button",{onClick:()=>C(r,i),className:"cta-links cta-links-secondary",children:"Supprimer"}),e.jsx("button",{className:"cta-links",onClick:()=>a?w():v(),children:a?"Valider":"Modifier"})]})]}):e.jsxs("article",{className:"main-articles",children:[e.jsx("h2",{className:"main-articles-title",children:c?"Chargement":"Erreur"}),c&&e.jsx("p",{children:"Les données sont en cours de récupération..."}),!c&&e.jsxs("p",{children:["Aucun contenu ne correspond à votre recherche. ",e.jsx(x,{to:"/todos",children:"Revenir sur la liste des tâches"})]})]})}function I({}){return[{title:"Todo Detail"},{name:"description",content:"A simple detailled todo object in React"}]}const P=M(function(){return e.jsxs("section",{className:"main-sections",children:[e.jsx(x,{to:"/todos",className:"cta-links",children:"Retour"}),e.jsx(R,{})]})});export{P as default,I as meta};
