import{a as t,o as f}from"./chunk-NL6KNZEE-p7aHl_Kw.js";const S=t.createContext(null),h=({children:l})=>{const[i,a]=t.useState(!0),[c,e]=t.useState([]),r=()=>{const o=localStorage.getItem("todos");return o?JSON.parse(o):null},n=o=>{localStorage.setItem("todos",JSON.stringify(o))},u=()=>{localStorage.removeItem("todos")},T=o=>{const s=c?[...c,o]:[o];n(s),d(s)},d=o=>{e(o)},g=o=>{const s=r();s&&(e(s),a(!1),console.log("%c Todos mis à jour depuis le localStorage","color: #ba3;"))};return t.useEffect(()=>{i&&(async()=>{const o=r();o||await fetch("/react-todolist/datas/todos.json").then(s=>s.ok&&s.json()).then(s=>(e(s),n(s),a(!1),console.log("%c Todos chargées depuis le fichier json","color: #e26;"))).catch(s=>console.error(`Erreur : ${s}`)),o&&(e(o),a(!1),console.log("%c Todos chargées depuis le localStorage","color: #ba3;"))})()}),f.jsx(S.Provider,{value:{todos:c,setSessionTodos:n,deleteSessionTodos:u,updateTodos:d,updateTodosWithSession:g,addTodo:T},children:l})};export{h as T,S as a};
